---
title: ğŸ’å¯é€‰çš„æ‰§è¡Œæµç¨‹
date: 2020-05-11 13:54:56
permalink: /pages/2f844d
article: false
---

### ä»»åŠ¡é…ç½®
```yaml
- name: "optionalRule"
  content: "caseOptionalTaskA->caseOptionalTaskB->caseOptionalTaskC,caseOptionalTaskD->caseOptionalTaskE->caseOptionalTaskF"
```
å¦‚æœå¼€å‘è€…åœ¨è°ƒç”¨æ—¶åªå¸Œæœ›æ‰§è¡Œ `caseOptionalTaskD` , åˆ™åœ¨ä»»åŠ¡é“¾ä¸­ åªéœ€è¦æ‰§è¡Œ`caseOptionalTaskAã€caseOptionalTaskBã€caseOptionalTaskD` ä¸‰ä¸ªä»»åŠ¡å³å¯å³å¯ã€‚ å…¶ä»–ä»»åŠ¡ä¸éœ€è¦æ‰§è¡Œ
ï¼Œæä¾›äº†éšæœºé€‰æ‹©æµç¨‹ä¸­ä»»åŠ¡æ‰§è¡Œçš„èƒ½åŠ›ã€‚


### è°ƒç”¨æ–¹å¼

`gobrsAsync.go`æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•° `Set<String>` éœ€è¦ä¼ é€’ è¦æ‰§è¡Œçš„ä»»åŠ¡ `bean` åç§°ã€‚

```java 
    @Test
    public void testOptional() {
        Map<Class, Object> params = new HashMap<>();
        Set<String> options = new HashSet<>();
        options.add("caseOptionalTaskD"); # optionsä¸­æ·»åŠ è¦æ‰§è¡Œçš„ä»»åŠ¡ bean åç§°
        AsyncResult asyncResult = gobrsAsync.go("optionalRule", () -> params, options, 300000);
    }
```

### æµ‹è¯•ç”¨ä¾‹
[æºç åœ°å€](https://gitee.com/dromara/gobrs-async/blob/master/gobrs-async-test/src/test/java/com/gobrs/async/test/optional/CaseOptional.java)
### è¿è¡Œç»“æœ
```sh 
CaseOptionalTaskA ä»»åŠ¡æ‰§è¡Œ
CaseOptionalTaskA ä»»åŠ¡æ‰§è¡Œå®Œæˆ
2022-12-11 15:47:32.511  INFO 13458 --- [o-8888-exec-152] com.gobrs.async.core.task.AsyncTask      : <0><11781331511388032> <11781331511388032> [caseOptionalTaskA] execution
CaseOptionalTaskB ä»»åŠ¡æ‰§è¡Œ
CaseOptionalTaskB ä»»åŠ¡æ‰§è¡Œå®Œæˆ
2022-12-11 15:47:32.613  INFO 13458 --- [o-8888-exec-152] com.gobrs.async.core.task.AsyncTask      : <0><11781331511388032> <11781331511388032> [caseOptionalTaskB] execution
CaseOptionalTaskD ä»»åŠ¡æ‰§è¡Œ
CaseOptionalTaskDä»»åŠ¡æ‰§è¡Œå®Œæˆ
2022-12-11 15:47:32.718  INFO 13458 --- [o-8888-exec-152] com.gobrs.async.core.task.AsyncTask      : <0><11781331511388032> <11781331511388032> [caseOptionalTaskD] execution
2022-12-11 15:47:32.718  INFO 13458 --- [o-8888-exec-152] com.gobrs.async.core.TaskLoader          : <0><11781331511388032> ã€ProcessTraceã€‘Total cost: 311ms | traceId = 11781331511388032 | ã€taskã€‘caseOptionalTaskA cost :102msã€stateã€‘ï¼šsuccess; ->ã€taskã€‘caseOptionalTaskB cost :102msã€stateã€‘ï¼šsuccess; ->ã€taskã€‘caseOptionalTaskD cost :105msã€stateã€‘ï¼šsuccess; 
cost 311
```


#### é€‚åº”åœºæ™¯
åœ¨åš **ISV**  ([äº¬ä¸œå•†åŸISVç»„ä»¶åŒ–å»ºè®¾](https://developer.51cto.com/article/712050.html))  å»ºè®¾æ—¶ï¼Œ æ¥¼å±‚ä¸­çš„å¤šä¸ªç»„ä»¶å¯èƒ½å­˜åœ¨ç€ä»»åŠ¡æµç¨‹çš„ç¼–æ’ï¼Œ æ‰€éœ€è¦çš„ä¸Šæ¸¸æ•°æ®æ•°é‡å¤šå°‘ä¸ä¸€ï¼Œæ‰€ä»¥æ­¤æ—¶å°±éœ€è¦è¿›è¡Œç¼–æ’æµç¨‹ä¸­çš„ä»»åŠ¡é€‰æ‹©æ‰§è¡Œå¤„ç†äº†ã€‚
å¦‚ä¸‹å¯¹æ¯ä¸ªç»„ä»¶è¿›è¡Œç¼–æ’æ•°æ®ç¼–æ’å¤„ç†ã€‚
![image-20220809222627074](https://kevin-cloud-dubbo.oss-cn-beijing.aliyuncs.com/gobrs-async/image-20220809222627074.png)
