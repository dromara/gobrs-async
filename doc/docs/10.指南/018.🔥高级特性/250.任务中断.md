---
title: ğŸ‘ä»»åŠ¡ä¸­æ–­
date: 2020-05-11 13:54:56
permalink: /pages/2f84sz1
article: false
---

## ä¸­æ–­çŠ¶æ€ç 

åœ¨æµç¨‹ä¸­å¦‚æœä½ æƒ³åœ¨æŸç§ä¸šåŠ¡åœºæ™¯ä¸‹æ‰‹åŠ¨å…³é—­ä»»åŠ¡æµç¨‹æ‰§è¡Œã€‚ å¹¶åœ¨ä»»åŠ¡è§¦å‘å™¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ ¹æ®<code>AsyncResult</code> çš„ç»“æœï¼Œåˆ¤æ–­ä¸åŒçš„ä¸šåŠ¡é€»è¾‘
**Gobrs-Async** ä¹Ÿä¸ºä½ æä¾›äº†é€”å¾„ã€‚ ç”¨æˆ·åªéœ€è¦åœ¨ å¼‚æ­¥ä»»åŠ¡çš„ <code> task</code>æ–¹æ³•ä¸­ æ‰‹åŠ¨è·³ç”¨ <code>stopAsync</code> é€ä¼ <code>TaskSupport</code>
æ— éœ€å…³æ³¨å†…éƒ¨å®ç°ï¼Œå³å¯è½»æ¾å®Œæˆå…³é—­ä¸»æµç¨‹ã€‚

<code>stopAsync</code> æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š

* <code>TaskSupport</code>: **Gobrs-Async** ä½¿ç”¨å‚æ•°ï¼Œ é€ä¼ å³å¯ã€‚
* <code>expCode</code> : ä¸­æ–­çŠ¶æ€ç ï¼Œå¯è‡ªå®šä¹‰æšä¸¾

```java 

    @Override
    public Map task(DataContext dataContext, TaskSupport support) {
        try {
            // todo æ‰§è¡Œä»»åŠ¡
        } catch (Exception e) {
             // todo  æ ¹æ®ä¸åŒçš„å¼‚å¸¸ å¤„ç†è¿”å›ä¸åŒçš„ ä¸­æ–­ç 
            if (e instanceof RedirectSimpleException) {
                // ä¸­æ–­ä»»åŠ¡æµç¨‹
                stopAsync(support, PRODUCT_NOT_FOUND);
                return null;
            }
            stopAsync(support, SYSTEM_DEMOTION);
        }
        return null;
    }

```


[ä»»åŠ¡è§¦å‘å™¨æ‰§è¡Œå®Œæˆ](/pages/2f674a/#å¯åŠ¨ä»»åŠ¡æµç¨‹) æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¼šè·å– <code>AsyncResult</code> ä»»åŠ¡æµç¨‹æ‰§è¡Œç»“æœã€‚
æ ¹æ®ä¸åŒçš„ä¸­æ–­ç ï¼Œæ‰§è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚
```java 
Map<String, Object> params  = new HashMap();
// ä»»åŠ¡æµç¨‹åç§° , ä»»åŠ¡æµç¨‹ä¼ å…¥å‚æ•°, ä»»åŠ¡æµç¨‹è¶…æ—¶æ—¶é—´ 
AsyncResult asyncResult = gobrsAsync.go("ruleName", () -> params, timeOut);

if(asyncResult.getExpCode().equals(100)){
    // ä¸šåŠ¡ä¸€
}else if(asyncResult.getExpCode().equals(200)){
    // ä¸šåŠ¡äºŒ
}
```

::: cardList

```yaml
- name: æŠ€æœ¯å°å±‹
  desc: å¤§é“è‡³ç®€ï¼ŒçŸ¥æ˜“è¡Œéš¾
  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200122153807.jpg # å¯é€‰
  link: https://docs.sizegang.cn/ # å¯é€‰
  bgColor: '#CBEAFA' # å¯é€‰ï¼Œé»˜è®¤var(--bodyBg)ã€‚é¢œè‰²å€¼æœ‰#å·æ—¶è¯·æ·»åŠ å•å¼•å·
  textColor: '#6854A1' # å¯é€‰ï¼Œé»˜è®¤var(--textColor)
- name: æ¶æ„å¸ˆå¿…ç»ä¹‹è·¯
  desc: 'ç²¾å“å­¦ä¹ èµ„æº'
  avatar: https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png
  link: https://learn.sizegang.cn
  bgColor: '#718971'
  textColor: '#fff'
- name: å¹³å‡¡çš„ä½ æˆ‘
  desc: å¿«ä¹è´­ç‰©ï¼Œäº«å—ç”Ÿæ´»
  avatar: https://reinness.com/avatar.png
  link: https://m.jd.com
  bgColor: '#FCDBA0'
  textColor: '#A05F2C'
```
:::





